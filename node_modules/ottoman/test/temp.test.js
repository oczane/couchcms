var assert = require('chai').assert;
var H = require('./harness');
var ottoman = H.lib;

it('should use types by reference properly', function() {
  var typeId = H.uniqueId('type');
  var modelId = H.uniqueId('model');
  var TestType = ottoman.type(typeId, 'string');
  var TestMdl = ottoman.model(modelId, {
    name: TestType
  });
  var x = new TestMdl();
  x.name = 'George';
  var xJson = x.toJSON();
  assert.typeOf(xJson.name, 'string');
});
